import{S as g,P as y,Z as E,x as S,y as v,K as x,W as T,l as _,n as L}from"./three.module-9041595f.js";import{R,v as k,f as A}from"./fragment-6a76eb4a.js";import{G as C}from"./GLTFLoader-e6ad65de.js";import{O as G}from"./OrbitControls-89ca71c8.js";import{T as d}from"./tween.module-848351b5.js";import{d as P,r as b,o as W,c as B,a as I}from"./index-094517d4.js";const F=c=>{const n=new g,t=new y(70,window.innerWidth/window.innerHeight,.1,1e3);t.position.set(0,0,3);const m=new L;new R().loadAsync("/1k.hdr").then(e=>{e.mapping=E,n.background=e,n.environment=e});const l=new S({vertexShader:k,fragmentShader:A,side:v,uniforms:{uTime:{value:0}}});let p=null;const i=new x;new C().load("/model/fly.glb",e=>{console.log(e.scene),e.scene.scale.set(.2,.2,.2),i.add(e.scene),u(e.scene),p=e.scene.children[0],p.material=l;for(let r=0;r<150;r++){const s=e.scene.clone(!0),f=(Math.random()-.5)*150,w=Math.random()*50,M=(Math.random()-.5)*150;s.position.set(f,w,M),u(s),i.add(s)}n.add(i)});const u=e=>{new d.Tween(e.rotation).to({y:e.rotation.y+Math.random()*30},1e4+Math.random()*2e4).repeat(1/0).start(),new d.Tween(e.position).to({x:e.position.x+Math.random()*10,y:e.position.y+Math.random()*20},5e3+Math.random()*2e4).yoyo(!0).repeat(1/0).start()},a=new T;a.toneMapping=_,a.toneMappingExposure=.09;const o=new G(t,a.domElement);o.enableDamping=!0,o.autoRotate=!0,o.autoRotateSpeed=.1,o.maxPolarAngle=Math.PI/4*3,o.minPolarAngle=Math.PI/4,o.update(),a.setSize(window.innerWidth,window.innerHeight),c.appendChild(a.domElement);function h(e){const r=m.getElapsedTime();l.uniforms.uTime.value=r,o.update(),a.render(n,t),d.update(e),requestAnimationFrame(h)}h()},Q=P({__name:"ShaderMaterial",setup(c){const n=b();return W(()=>{F(n.value)}),(t,m)=>(I(),B("div",{ref_key:"threeRef",ref:n},null,512))}});export{Q as default};
