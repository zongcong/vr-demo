import{R as O,V as z,d as y,ae as W,S as D,P as H,A,W as R,w as b,M as q,c as B,H as L,D as P}from"./three.module-6576df63.js";import{d as F,r as T,o as k,c as N,a as V}from"./index-6cd62aed.js";class G extends O{constructor(s=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=s,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new z(.5,.5),this.addEventListener("removed",function(){this.traverse(function(o){o.element instanceof Element&&o.element.parentNode!==null&&o.element.parentNode.removeChild(o.element)})})}copy(s,o){return super.copy(s,o),this.element=s.element.cloneNode(!0),this.center=s.center,this}}const m=new y,_=new W,v=new W,M=new y,C=new y;class I{constructor(s={}){const o=this;let i,c,u,h;const d={objects:new WeakMap},a=s.element!==void 0?s.element:document.createElement("div");a.style.overflow="hidden",this.domElement=a,this.getSize=function(){return{width:i,height:c}},this.render=function(e,t){e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),_.copy(t.matrixWorldInverse),v.multiplyMatrices(t.projectionMatrix,_),w(e,e,t),f(e)},this.setSize=function(e,t){i=e,c=t,u=i/2,h=c/2,a.style.width=e+"px",a.style.height=t+"px"};function w(e,t,r){if(e.isCSS2DObject){m.setFromMatrixPosition(e.matrixWorld),m.applyMatrix4(v);const n=e.visible===!0&&m.z>=-1&&m.z<=1&&e.layers.test(r.layers)===!0;if(e.element.style.display=n===!0?"":"none",n===!0){e.onBeforeRender(o,t,r);const p=e.element;p.style.transform="translate("+-100*e.center.x+"%,"+-100*e.center.y+"%)translate("+(m.x*u+u)+"px,"+(-m.y*h+h)+"px)",p.parentNode!==a&&a.appendChild(p),e.onAfterRender(o,t,r)}const l={distanceToCameraSquared:x(r,e)};d.objects.set(e,l)}for(let n=0,l=e.children.length;n<l;n++)w(e.children[n],t,r)}function x(e,t){return M.setFromMatrixPosition(e.matrixWorld),C.setFromMatrixPosition(t.matrixWorld),M.distanceToSquared(C)}function S(e){const t=[];return e.traverse(function(r){r.isCSS2DObject&&t.push(r)}),t}function f(e){const t=S(e).sort(function(n,l){if(n.renderOrder!==l.renderOrder)return l.renderOrder-n.renderOrder;const p=d.objects.get(n).distanceToCameraSquared,E=d.objects.get(l).distanceToCameraSquared;return p-E}),r=t.length;for(let n=0,l=t.length;n<l;n++)t[n].element.style.zIndex=r-n}}}const K=F({__name:"CSS2dDemo",setup(g){const s=T(),o=()=>{const i=new D,c=new H(75,window.innerWidth/window.innerHeight,.1,1e3);c.position.z=10;const u=new A(100);i.add(u);const h=new R;h.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(h.domElement);const d=new I;d.setSize(window.innerWidth,window.innerHeight),d.domElement.style.position="absolute",d.domElement.style.top="0px",s.value.appendChild(d.domElement);const a=document.createElement("div");a.textContent="Hello, CSS2DObject!",a.style.color="white";const w=new b(1,1,8),x=new q({color:65280}),S=new B(w,x);i.add(S);const f=new L(9290206,26253,.5);f.position.set(1,1,1),i.add(f);const e=new P(16777215,.8);e.position.set(-5,25,-1),e.castShadow=!0,e.shadow.camera.near=.01,e.shadow.camera.far=500,e.shadow.camera.right=30,e.shadow.camera.left=-30,e.shadow.camera.top=30,e.shadow.camera.bottom=-30,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,e.shadow.radius=4,e.shadow.bias=-6e-5,i.add(e);const t=new G(a);t.position.set(0,0,4),i.add(t);function r(){requestAnimationFrame(r),h.render(i,c),d.render(i,c)}r()};return k(()=>{o()}),(i,c)=>(V(),N("div",{ref_key:"threeRef",ref:s},null,512))}});export{K as default};
