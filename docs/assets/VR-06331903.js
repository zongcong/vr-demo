var b=Object.defineProperty;var f=(s,t,e)=>t in s?b(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var n=(s,t,e)=>(f(s,typeof t!="symbol"?t+"":t,e),e);import{E as D,V as x,Q as y,a as F,S as R,P as q,A as S,W as _,b as B,T as L,s as l,M as A,c as C,d as p}from"./three.module-9041595f.js";import{T as d}from"./tween.module-848351b5.js";import{d as P,r as Q,o as k,c as T,a as V}from"./index-094517d4.js";class W extends D{constructor(e,a){super();n(this,"camera");n(this,"domElement");n(this,"enabled");n(this,"rotateSpeed");n(this,"sphericalDelta");n(this,"onMouseMoveBound");n(this,"targetQuaternion");n(this,"updateRequested");n(this,"dampingFactor");n(this,"enableDamping");this.camera=e,this.domElement=a,this.enabled=!0,this.updateRequested=!1,this.rotateSpeed=1,this.dampingFactor=.9,this.enableDamping=!0,this.sphericalDelta=new x,this.onMouseMoveBound=this.onMouseMove.bind(this),this.targetQuaternion=new y().copy(this.camera.quaternion),this.domElement.addEventListener("mousedown",this.onMouseDown.bind(this)),this.domElement.addEventListener("mouseup",this.onMouseUp.bind(this)),this.domElement.addEventListener("mouseleave",this.onMouseUp.bind(this))}setEnabled(e){this.enabled=e}getEnabled(){return this.enabled}onMouseDown(e){this.getEnabled()&&(e.preventDefault(),this.domElement.style.cursor="grab",this.domElement.addEventListener("mousemove",this.onMouseMoveBound))}onMouseUp(e){this.getEnabled()&&(e.preventDefault(),this.domElement.style.cursor="auto",this.domElement.removeEventListener("mousemove",this.onMouseMoveBound))}onMouseMove(e){if(!this.getEnabled())return;e.preventDefault();const a=e.movementX||e.mozMovementX||e.webkitMovementX||0,o=e.movementY||e.mozMovementY||e.webkitMovementY||0;this.sphericalDelta.x-=a*.004*this.rotateSpeed*this.dampingFactor,this.sphericalDelta.y-=o*.004*this.rotateSpeed*this.dampingFactor,this.updateRequested||(this.updateRequested=!0,requestAnimationFrame(this.update.bind(this)))}update(){if(!this.getEnabled())return;const e=new F(0,0,0,"YXZ");e.setFromQuaternion(this.camera.quaternion),this.sphericalDelta.x*=this.dampingFactor,this.sphericalDelta.y*=this.dampingFactor,e.y+=this.sphericalDelta.x,e.x+=this.sphericalDelta.y,e.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,e.x)),this.camera.quaternion.setFromEuler(e),this.dispatchEvent({type:"change"}),this.updateRequested=!1}}const z=P({__name:"VR",setup(s){const t=Q(),e=()=>{const a=new R,o=new q(70,window.innerWidth/window.innerHeight,.1,1e3),E=new S(5);a.add(E);const i=new _;i.setSize(window.innerWidth,window.innerHeight),t.value.appendChild(i.domElement);const r=new W(o,i.domElement);r.rotateSpeed=.1,r.dampingFactor=.86,r.enabled=!0;const m=new B(1,256,256);m.scale(1,1,-1);const h=new L().load("./3.jpg");h.encoding=l;const u=new A({map:h,color:16777215});u.map.encoding=l;const M=new C(m,u);a.add(M);const w=new p(0,0,0),g=new p(10,0,0);new d.Tween(w).to(g,15e3).easing(d.Easing.Quadratic.InOut).onUpdate(v=>{o.position.copy(v)});function c(){d.update(),r.update(),i.render(a,o),requestAnimationFrame(c)}c()};return k(()=>{e()}),(a,o)=>(V(),T("div",{ref_key:"threeRef",ref:t},null,512))}});export{z as default};
